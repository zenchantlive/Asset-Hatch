{
  "reward": {
    "type": "xlm"
  },
  "sourcedFromGithub": false,
  "githubAsSourceMeta": null,
  "isAnonymous": false,
  "coverImage": "",
  "autoGeneratedCover": "",
  "hasPolls": false,
  "totalPollVotes": 0,
  "upvotes": 0,
  "downvotes": 0,
  "untaggedFrom": [],
  "upvotedBy": [],
  "downvotedBy": [],
  "responses": [],
  "followers": [],
  "answeredByTarget": false,
  "inviters": [],
  "duplicatePosts": [],
  "hasReward": false,
  "bookmarkedIn": [],
  "similarPostIds": [],
  "reactionsByCurrentUser": [],
  "toc": [],
  "_id": "695affbdc53fffad65abdd9e",
  "createdAt": "2026-01-05T00:03:09.375Z",
  "updatedAt": "2026-01-05T00:03:09.375Z",
  "views": 1,
  "isActive": true,
  "hasLatex": false,
  "popularity": 7968.0042,
  "discussionScore": 0,
  "enableToc": false,
  "type": "story",
  "partOfPublication": true,
  "responseCount": 0,
  "replyCount": 0,
  "isFeatured": false,
  "isEngaging": false,
  "isDelisted": false,
  "isNotified": false,
  "numCollapsed": 0,
  "reactions": [],
  "totalReactions": 0,
  "totalReactionsByCurrentUser": 0,
  "isPinnedToBlog": false,
  "disableComments": false,
  "commentsPaused": false,
  "syncAlgolia": false,
  "numUniqueUsersWhoReacted": 0,
  "slugOverridden": false,
  "tweetOptions": {
    "enabled": false
  },
  "title": "Part 14: The Privacy Pivot - IndexedDB and BYOK",
  "cuid": "cmk0ed8se000p02jx1mtofisq",
  "dateAdded": "2026-01-05T00:03:09.374Z",
  "isCoverAttributionHidden": false,
  "coverImageAttribution": "",
  "coverImagePhotographer": "",
  "stickCoverToBottom": false,
  "slug": "part-14-the-privacy-pivot-indexeddb-and-byok",
  "content": "<p>If Part 13 was about the <em>where</em> (Postgres), Part 14 is about the <em>who</em>. Specifically: <strong>Who owns the data?</strong></p>\n<p>As we prepared to open-source Asset Hatch, we hit a philosophical wall. Do I really want to store 5,000 AI-generated images of \"Cute Slime with a Top Hat\" on my server? Do users want me to have their API keys?</p>\n<p>The answer was a resounding <strong>\"No.\"</strong></p>\n<h2 id=\"heading-the-image-bloat-problem\">The \"Image Bloat\" Problem</h2>\n<p>Storing images as Blobs in a database is fine for a prototype. But for a production app, it’s a recipe for a massive cloud bill and a slow user experience.</p>\n<p>We made a radical decision: <strong>Remove image storage from the server.</strong></p>\n<p>Now, when an image is generated:</p>\n<ol>\n<li><p>The server passes the raw image data back to the client.</p>\n</li>\n<li><p>The client saves it directly to <strong>IndexedDB</strong> (via Dexie).</p>\n</li>\n<li><p>The server only stores the <em>metadata</em> (prompt, timestamp, status).</p>\n</li>\n</ol>\n<p>Your images never live on my server. They live in your browser. It’s faster, it’s private, and it’s basically free for me (the host).</p>\n<h2 id=\"heading-byok-bring-your-own-key\">BYOK: Bring Your Own Key</h2>\n<p><img src=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1767571315340/3500a650-1056-4b4e-80ff-e9773fd5a9fa.png\" alt class=\"image--center mx-auto\" /></p>\n<p>We also implemented a <strong>Settings Page</strong> for \"Bring Your Own Key\" (BYOK) support.</p>\n<p>Instead of routing everything through a central (and expensive) API proxy, users can now input their own <strong>OpenRouter</strong> or <strong>Gemini</strong> keys.</p>\n<ul>\n<li><p>Keys are stored in the user's browser (local storage/indexedDB).</p>\n</li>\n<li><p>They are only sent to the server for the duration of the request.</p>\n</li>\n<li><p>They are NEVER persisted in our database.</p>\n</li>\n</ul>\n<h2 id=\"heading-the-browser-storage-warning\">The \"Browser Storage Warning\"</h2>\n<p>This shift created a new UX challenge. If a user clears their browser cache, they lose their images.</p>\n<p>We added a subtle <strong>Browser Storage Warning</strong> in the header. It’s not an \"Error\"—it’s a reminder: \"Hey, your assets are safe on your machine, but if you want to keep them forever, make sure you Export them!\"</p>\n<h2 id=\"heading-why-this-matters-for-open-source\">Why This Matters for Open Source</h2>\n<p>By moving the \"Heavy Lifting\" (image storage) and the \"Secret Keeping\" (API keys) to the client, we’ve made Asset Hatch remarkably easy to deploy. You don't need a massive S3 bucket or a complex encryption service. You just need a standard web server.</p>\n<p>We’ve turned a centralized \"Service\" into a decentralized \"Tool.\"</p>\n<h2 id=\"heading-conclusion\">Conclusion</h2>\n<p>We’re lean, we’re private, and we’re ready. The infrastructure is solid. The privacy is baked in.</p>\n<p>Now, it’s time to tackle the ungodly Mobile view. Prepare for relative units, flexbox, and a whole lot of CSS positioning.</p>\n",
  "contentMarkdown": "If Part 13 was about the *where* (Postgres), Part 14 is about the *who*. Specifically: **Who owns the data?**\n\nAs we prepared to open-source Asset Hatch, we hit a philosophical wall. Do I really want to store 5,000 AI-generated images of \"Cute Slime with a Top Hat\" on my server? Do users want me to have their API keys?\n\nThe answer was a resounding **\"No.\"**\n\n## The \"Image Bloat\" Problem\n\nStoring images as Blobs in a database is fine for a prototype. But for a production app, it’s a recipe for a massive cloud bill and a slow user experience.\n\nWe made a radical decision: **Remove image storage from the server.**\n\nNow, when an image is generated:\n\n1. The server passes the raw image data back to the client.\n    \n2. The client saves it directly to **IndexedDB** (via Dexie).\n    \n3. The server only stores the *metadata* (prompt, timestamp, status).\n    \n\nYour images never live on my server. They live in your browser. It’s faster, it’s private, and it’s basically free for me (the host).\n\n## BYOK: Bring Your Own Key\n\n![](https://cdn.hashnode.com/res/hashnode/image/upload/v1767571315340/3500a650-1056-4b4e-80ff-e9773fd5a9fa.png align=\"center\")\n\nWe also implemented a **Settings Page** for \"Bring Your Own Key\" (BYOK) support.\n\nInstead of routing everything through a central (and expensive) API proxy, users can now input their own **OpenRouter** or **Gemini** keys.\n\n* Keys are stored in the user's browser (local storage/indexedDB).\n    \n* They are only sent to the server for the duration of the request.\n    \n* They are NEVER persisted in our database.\n    \n\n## The \"Browser Storage Warning\"\n\nThis shift created a new UX challenge. If a user clears their browser cache, they lose their images.\n\nWe added a subtle **Browser Storage Warning** in the header. It’s not an \"Error\"—it’s a reminder: \"Hey, your assets are safe on your machine, but if you want to keep them forever, make sure you Export them!\"\n\n## Why This Matters for Open Source\n\nBy moving the \"Heavy Lifting\" (image storage) and the \"Secret Keeping\" (API keys) to the client, we’ve made Asset Hatch remarkably easy to deploy. You don't need a massive S3 bucket or a complex encryption service. You just need a standard web server.\n\nWe’ve turned a centralized \"Service\" into a decentralized \"Tool.\"\n\n## Conclusion\n\nWe’re lean, we’re private, and we’re ready. The infrastructure is solid. The privacy is baked in.\n\nNow, it’s time to tackle the ungodly Mobile view. Prepare for relative units, flexbox, and a whole lot of CSS positioning.",
  "brief": "If Part 13 was about the where (Postgres), Part 14 is about the who. Specifically: Who owns the data?\nAs we prepared to open-source Asset Hatch, we hit a philosophical wall. Do I really want to store 5,000 AI-generated images of \"Cute Slime with a To...",
  "author": "695abff5e4c04d1036cd307d",
  "sB": false,
  "isRepublished": false,
  "readTime": 2,
  "draft": "695aff184912ccbbfd865bc8",
  "tags": [
    "56744723958ef13879b952fc",
    "5c4c8cbe86ae9b1b6b0e9999",
    "656653b07175efc56504e003",
    "56744722958ef13879b94f32",
    "56744722958ef13879b94fb7"
  ],
  "publication": "695ac03d428b39bd40085e89",
  "metaTitle": "BYOK and Browser Storage: A Privacy-First AI Architecture | Part 14",
  "metaDescription": "Why I moved image storage to IndexedDB and let users bring their own API keys. Building a decentralized tool instead of a centralized service.",
  "series": "695ac45c21b769e7641e57a5",
  "isNewsletterActivated": true,
  "coAuthors": [],
  "pollOptions": [],
  "badges": [],
  "questionReplies": [],
  "contributors": [],
  "uniqueReactions": [],
  "reactionToCountMapUnique": {
    "any": 1
  },
  "id": "695affbdc53fffad65abdd9e"
}