{
  "reward": {
    "type": "xlm"
  },
  "sourcedFromGithub": false,
  "githubAsSourceMeta": null,
  "isAnonymous": false,
  "coverImage": "",
  "autoGeneratedCover": "",
  "hasPolls": false,
  "totalPollVotes": 0,
  "upvotes": 0,
  "downvotes": 0,
  "untaggedFrom": [],
  "upvotedBy": [],
  "downvotedBy": [],
  "responses": [],
  "followers": [],
  "answeredByTarget": false,
  "inviters": [],
  "duplicatePosts": [],
  "hasReward": false,
  "bookmarkedIn": [],
  "similarPostIds": [],
  "reactionsByCurrentUser": [],
  "toc": [],
  "_id": "695afe754912ccbbfd865bc4",
  "createdAt": "2026-01-04T23:57:41.216Z",
  "updatedAt": "2026-01-05T01:17:30.526Z",
  "views": 1,
  "isActive": true,
  "hasLatex": true,
  "popularity": 7967.9969,
  "discussionScore": 0,
  "enableToc": false,
  "type": "story",
  "partOfPublication": true,
  "responseCount": 0,
  "replyCount": 0,
  "isFeatured": false,
  "isEngaging": false,
  "isDelisted": false,
  "isNotified": false,
  "numCollapsed": 0,
  "reactions": [],
  "totalReactions": 0,
  "totalReactionsByCurrentUser": 0,
  "isPinnedToBlog": false,
  "disableComments": false,
  "commentsPaused": false,
  "syncAlgolia": false,
  "numUniqueUsersWhoReacted": 0,
  "slugOverridden": true,
  "tweetOptions": {
    "enabled": false
  },
  "title": "Part 13: The Great Migration - Neon and Prisma",
  "cuid": "cmk0e67kv000a02gp9ccmb5w1",
  "dateAdded": "2026-01-04T23:57:41.215Z",
  "isCoverAttributionHidden": false,
  "stickCoverToBottom": false,
  "slug": "part-13-the-great-migration-neon-and-prisma",
  "content": "<p>January 1st, 2026. A new year, a new database.</p>\n<p>Yesterday, we celebrated finishing the core features. Today, we celebrated by ripping out the heart of the application and replacing it with something shinier, faster, and cloud-native.</p>\n<p>Welcome to the <strong>Great Database Migration</strong>.</p>\n<h2 id=\"heading-goodbye-sqlite-hello-neon\">Goodbye SQLite, Hello Neon</h2>\n<p>SQLite is wonderful for hacking things together, but as we started looking toward the \"Open Source\" and \"Production\" phases, we realized we needed a database that didn't live in a single <code>.db</code> file on my hard drive.</p>\n<p>We chose <strong>Neon Postgres</strong>. Why?</p>\n<ol>\n<li><p><strong>Serverless Scaling</strong>: It scales to zero when I'm sleeping (and my wallet appreciates that).</p>\n</li>\n<li><p><strong>Branching</strong>: I can branch my database like I branch my code.</p>\n</li>\n<li><p><strong>Prisma 7 Support</strong>: The latest Prisma features work best with a robust Postgres backend.</p>\n</li>\n</ol>\n<h2 id=\"heading-the-prisma-7-loop\">The Prisma 7 \"Loop\"</h2>\n<p>We didn't just switch databases; we upgraded to <strong>Prisma 7.2.0</strong>. And this is where the \"New Year's Hangover\" really hit.</p>\n<p>In our setup, I run the dev server in <strong>Windows PowerShell</strong>, but the AI (Claude) operates in <strong>WSL2</strong>. This hybrid environment is usually fine, but Prisma 7 decided to be picky.</p>\n<p>The \"Loop\":</p>\n<ol>\n<li><p>Update <code>schema.prisma</code>.</p>\n</li>\n<li><p>Run <code>prisma generate</code> in Windows.</p>\n</li>\n<li><p>Realize WSL2 can't see the generated client correctly.</p>\n</li>\n<li><p>Run <code>prisma generate</code> in WSL2.</p>\n</li>\n<li><p>Watch the dev server crash because of version mismatches.</p>\n</li>\n</ol>\n<p>We spent two hours chasing a <code>PrismaClientInitializationError</code> that only appeared when the sun was at a certain angle. The fix? A complete purge of <code>node_modules</code> and a strict synchronization of environments.</p>\n<blockquote>\n<p>[!TIP] If you're building in a hybrid environment, pick ONE side for your database tools. Don't let your AI and your shell fight over who owns the generated client.</p>\n</blockquote>\n<h2 id=\"heading-moving-the-source-of-truth\">Moving the Source of Truth</h2>\n<p>The migration wasn't just about the tech stack; it was about the <em>data</em>. We had to move our local SQLite tables into Neon's Postgres schema.</p>\n<p>Thanks to our <strong>Layered Architecture</strong> (Prisma = Server, Dexie = Client), the UI didn't even notice the change. The \"Dual-Write\" strategy we implemented in Part 5 paid dividends today. We swapped the Prisma adapter, updated the <code>DATABASE_URL</code>, and... it just worked.</p>\n<h2 id=\"heading-conclusion\">Conclusion</h2>\n<p>We’re now running on a production-grade backend. No more \"where did my dev.db go?\" scares. Just clean, serverless Postgres.</p>\n<p>But as soon as we secured the backend, we realized we had a problem with the <em>images</em>.</p>\n",
  "contentMarkdown": "January 1st, 2026. A new year, a new database.\n\nYesterday, we celebrated finishing the core features. Today, we celebrated by ripping out the heart of the application and replacing it with something shinier, faster, and cloud-native.\n\nWelcome to the **Great Database Migration**.\n\n## Goodbye SQLite, Hello Neon\n\nSQLite is wonderful for hacking things together, but as we started looking toward the \"Open Source\" and \"Production\" phases, we realized we needed a database that didn't live in a single `.db` file on my hard drive.\n\nWe chose **Neon Postgres**. Why?\n\n1. **Serverless Scaling**: It scales to zero when I'm sleeping (and my wallet appreciates that).\n    \n2. **Branching**: I can branch my database like I branch my code.\n    \n3. **Prisma 7 Support**: The latest Prisma features work best with a robust Postgres backend.\n    \n\n## The Prisma 7 \"Loop\"\n\nWe didn't just switch databases; we upgraded to **Prisma 7.2.0**. And this is where the \"New Year's Hangover\" really hit.\n\nIn our setup, I run the dev server in **Windows PowerShell**, but the AI (Claude) operates in **WSL2**. This hybrid environment is usually fine, but Prisma 7 decided to be picky.\n\nThe \"Loop\":\n\n1. Update `schema.prisma`.\n    \n2. Run `prisma generate` in Windows.\n    \n3. Realize WSL2 can't see the generated client correctly.\n    \n4. Run `prisma generate` in WSL2.\n    \n5. Watch the dev server crash because of version mismatches.\n    \n\nWe spent two hours chasing a `PrismaClientInitializationError` that only appeared when the sun was at a certain angle. The fix? A complete purge of `node_modules` and a strict synchronization of environments.\n\n> \\[!TIP\\] If you're building in a hybrid environment, pick ONE side for your database tools. Don't let your AI and your shell fight over who owns the generated client.\n\n## Moving the Source of Truth\n\nThe migration wasn't just about the tech stack; it was about the *data*. We had to move our local SQLite tables into Neon's Postgres schema.\n\nThanks to our **Layered Architecture** (Prisma = Server, Dexie = Client), the UI didn't even notice the change. The \"Dual-Write\" strategy we implemented in Part 5 paid dividends today. We swapped the Prisma adapter, updated the `DATABASE_URL`, and... it just worked.\n\n## Conclusion\n\nWe’re now running on a production-grade backend. No more \"where did my dev.db go?\" scares. Just clean, serverless Postgres.\n\nBut as soon as we secured the backend, we realized we had a problem with the *images*.",
  "brief": "January 1st, 2026. A new year, a new database.\nYesterday, we celebrated finishing the core features. Today, we celebrated by ripping out the heart of the application and replacing it with something shinier, faster, and cloud-native.\nWelcome to the Gr...",
  "author": "695abff5e4c04d1036cd307d",
  "sB": false,
  "isRepublished": false,
  "readTime": 2,
  "draft": "695afe1b19362aa3be596d00",
  "tags": [
    "56744722958ef13879b950eb",
    "66f021c1028b8b972b374d69",
    "5a748cf3f7ef75131419eb9e",
    "56744721958ef13879b949b5",
    "56744723958ef13879b9534f",
    "5f5116c9c48c6b29cd2eda7b"
  ],
  "publication": "695ac03d428b39bd40085e89",
  "metaTitle": "Migrating from SQLite to Neon Postgres with Prisma 7 | Part 13",
  "metaDescription": "New year, new database. Moving from file-based SQLite to serverless Postgres and fighting the WSL2/Windows Prisma generation loop.",
  "isNewsletterActivated": true,
  "coAuthors": [],
  "dateUpdated": "2026-01-05T01:17:30.526Z",
  "hasCustomDate": false,
  "series": "695ac45c21b769e7641e57a5",
  "pollOptions": [],
  "badges": [],
  "questionReplies": [],
  "contributors": [],
  "uniqueReactions": [],
  "reactionToCountMapUnique": {
    "any": 1
  },
  "id": "695afe754912ccbbfd865bc4"
}